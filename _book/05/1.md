# 一、传输层概述

## 1.1 传输层的功能

传输层为应用层提供通信服务，使用网络层的服务，它是**只有主机才有的层次**

传输层的功能：

1. 传输层提供**进程和进程**之间的逻辑通信。
2. 复用[^1]和分用[^2]
3. 传输层对收到的报文进行差错检测。
4. 传输层的两种协议。

## 1.2 传输层的两个协议

1. 面向连接的传输控制协议TCP

传送数据之前必须建立连接，数据传送结束后要释放连接。不提供广播或多播服务。由于TCP要提供可靠的面向连接的传输服务，因此不可避免增加了许多开销：确认、流量控制、计时器及连接管理等。

可靠，面向连接，时延大，适用于大文件。

2. 无连接的用户数据报协议UDP

传送数据之前不需要建立连接，收到UDP报文后也不需要给出任何确认。

不可靠，无连接，时延小，适用于小文件。

## 1.3 传输层的寻址与端口

端口是传输层的SAP，标识主机中的应用进程。端口号只有本地意义，在因特网中不同计算机的相同端口是没有联系的。端口号长度为16bit，能表示65536个不同的端口号。

- 服务端使用的端口号。它有分两类，最重要的一类是熟知端口号，数值为0-1023，给TCP/IP最重要的一些应用程序，让所有用户都知道。另一类是登记端口号，数值为1024-49151

| 应用程序   | FTP  | TELNET | SMTP | DNS  | TFTP | HTTP | SNMP |
| ---------- | ---- | ------ | ---- | ---- | ---- | ---- | ---- |
| 熟知端口号 | 21   | 23     | 25   | 53   | 69   | 80   | 161  |

- 客户端使用的端口号，数值为49152-65535，仅在客户进程运行时才动态选择。