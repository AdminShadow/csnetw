# 七、网络层设备

## 7.1 路由器

路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。

![图片.png](https://upload-images.jianshu.io/upload_images/26868451-72c0bd4443215d95.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 路由选择也称控制部分，根据所选定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断地更新和维护路由表。
- 交换结构：根据转发表（路由表得来）对分组进行转发。

>若收到RIP/OSPF分组等，则把分组送往路由选择处理机；若收到数据分组，则查找转发表并输出。

![图片.png](https://upload-images.jianshu.io/upload_images/26868451-0edb87de03897ef5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，这就使后面再进入队列的分组由于没有存储空间而只能被丢弃。**路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因。**

路由器(网络层)可以互联两个不同网络层协议的网段。
网桥(链路层)可以互联两个物理层和链路层不同的网段。
集线器(物理层)不能互联两个物理层不同的网段。

## 7.2 路由表与路由转发

路由表根据路由选择算法得出的，主要用途是路由选择，总用软件来实现。

![图片.png](https://upload-images.jianshu.io/upload_images/26868451-9a821a8a138bb62f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

转发表由路由表得来，可以用软件实现，也可以用特殊的硬件来实现。转发表必须包含完成转发功能所必需的信息，在转发表的每一行必须包含从要到达的目的网络到输出端口和某些MAC地址信息的映射。

[^1]: 距离：通常为“跳数”，即从源端口到目的端口所经过的路由器个数，经过一个路由器跳数+1。特别的，从一路由器到直接连接的网络距离为1。RIP允许一条路由最多只能包含15个路由器，因此距离为16表示网络不可达。

